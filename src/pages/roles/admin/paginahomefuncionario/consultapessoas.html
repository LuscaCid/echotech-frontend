<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consulta de Pessoas</title>
    <link rel="stylesheet" href="../../../../../styles/consultapessoas.css">
    <link rel="stylesheet" href="../../../../../styles/constants.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        .icon {
            color: #3a3936;
            cursor: pointer;
            margin-left: 10px;
        }

        .edit-icon:hover,
        .remove-icon:hover {
            color: #13e42f;
        }

        .editable {
            border: none;
            background: transparent;
            color: inherit;
            width: 100%;
        }
        
        .confirm-btn {
            color: #41a73d;
            cursor: pointer;
        }
        
        .confirm-btn:hover {
            color: #51e951;
        }
    </style>
</head>
<body>
    <header class="center">
        <h1>Consulta de Pessoas</h1>
    </header>
    <main>
        <section class="center mt-2">
            <input
              class="text-2xl text-white rounded-md p-4 bg-zinc-700 border-zinc-600 border"
              placeholder="Pesquisar" 
              id="input-pesquisa"
              type="text">
              <button id="botao-pesquisa">
                <span class="search-icon"><i class="fas fa-search"></i></span>
                Consultar
            </button>            
        </section>
        <div class="container center">
            <table>
                <thead>
                    <tr>
                        <th>Nome do Cliente</th>
                        <th>Material Residual</th>
                        <th>Quantidade</th>
                        <th>Valor em $Eco</th>
                        <th>Ações</th>
                    </tr>
                </thead>
                <tbody id="product-details">
                    <tr>
                        <td contenteditable="false">João</td>
                        <td contenteditable="false">Papel</td>
                        <td contenteditable="false">200 kg</td>
                        <td contenteditable="false">$Eco 300</td>
                        <td>
                            <i class="fas fa-edit icon edit-icon" onclick="editRow(this)" title="Editar"></i>
                            <i class="fas fa-check-circle icon confirm-btn" onclick="confirmUpdate(this)" title="Confirmar"></i>
                            <i class="fas fa-trash-alt icon remove-icon" onclick="deleteRow(this)" title="Remover"></i>
                        </td>
                    </tr>
                    <tr>
                        <td contenteditable="false">Maria</td>
                        <td contenteditable="false">Plástico</td>
                        <td contenteditable="false">100 kg</td>
                        <td contenteditable="false">$Eco 150</td>
                        <td>
                            <i class="fas fa-edit icon edit-icon" onclick="editRow(this)" title="Editar"></i>
                            <i class="fas fa-check-circle icon confirm-btn" onclick="confirmUpdate(this)" title="Confirmar"></i>
                            <i class="fas fa-trash-alt icon remove-icon" onclick="deleteRow(this)" title="Remover"></i>
                        </td>
                    </tr>
                    <tr>
                        <td contenteditable="false">Carlos</td>
                        <td contenteditable="false">Vidro</td>
                        <td contenteditable="false">50 kg</td>
                        <td contenteditable="false">$Eco 75</td>
                        <td>
                            <i class="fas fa-edit icon edit-icon" onclick="editRow(this)" title="Editar"></i>
                            <i class="fas fa-check-circle icon confirm-btn" onclick="confirmUpdate(this)" title="Confirmar"></i>
                            <i class="fas fa-trash-alt icon remove-icon" onclick="deleteRow(this)" title="Remover"></i>
                        </td>
                    </tr>
                    <tr>
                        <td contenteditable="false">Ana</td>
                        <td contenteditable="false">Metal</td>
                        <td contenteditable="false">80 kg</td>
                        <td contenteditable="false">$Eco 120</td>
                        <td>
                            <i class="fas fa-edit icon edit-icon" onclick="editRow(this)" title="Editar"></i>
                            <i class="fas fa-check-circle icon confirm-btn" onclick="confirmUpdate(this)" title="Confirmar"></i>
                            <i class="fas fa-trash-alt icon remove-icon" onclick="deleteRow(this)" title="Remover"></i>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </main>

    
    <script>
        function searchProducts() {
            var input, filter, table, tr, td, i, txtValue;
            input = document.getElementById("input-pesquisa");
            filter = input.value.toUpperCase();
            table = document.getElementById("product-details");
            tr = table.getElementsByTagName("tr");

            for (i = 0; i < tr.length; i++) {
                td = tr[i].getElementsByTagName("td")[0];
                if (td) {
                    txtValue = td.textContent || td.innerText;
                    if (txtValue.toUpperCase().indexOf(filter) > -1) {
                        tr[i].style.display = "";
                    } else {
                        tr[i].style.display = "none";
                    }
                }
            }
        }

        document.getElementById("input-pesquisa").addEventListener("keyup", searchProducts);
    </script>

    <script>
        function editRow(element) {
            var row = element.closest("tr");
            var cells = row.querySelectorAll("td:not(:last-child)");

            cells.forEach(function(cell) {
                cell.contentEditable = true;
            });
        }

        function confirmUpdate(element) {
            var row = element.closest("tr");
            var cells = row.querySelectorAll("td:not(:last-child)");

            cells.forEach(function(cell) {
                cell.contentEditable = false;
            });
        }

        function deleteRow(element) {
            var row = element.closest("tr");
            
            row.remove();
        }
    </script>
</body>
</html>
